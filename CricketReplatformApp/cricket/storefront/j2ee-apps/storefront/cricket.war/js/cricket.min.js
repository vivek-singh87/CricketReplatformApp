jQuery.validator.addMethod("zipcode",function(zip){zip=zip.replace(/^\s+/,"");zip=zip.replace(/\s+$/,"");if(zip.length==0){return true;}if(zip.match(/^\d{5}([- ]?\d{4})?$/)){return true;}return false;},"Please specify a valid US ZIP code");jQuery.validator.addMethod("phoneUS",function(phone_number,element){phone_number=phone_number.replace(/\s+/g,"");return this.optional(element)||phone_number.length>9&&phone_number.match(/^(1-?)?(\([2-9]\d{2}\)|[2-9]\d{2})-?[2-9]\d{2}-?\d{4}$/);},"Please specify a valid phone number");jQuery.validator.addMethod("poBox",function(value,element){var pattern1=/(^p\.?\s?o\.?\s?b\.?(ox|in)?(\s|[0-9])|post\soffice\s?b\.?(ox|in))/i;var pattern2=/(^p\.?\s?o\.?\s?b\.?(ox|in)?(\s[0-9])|^post\soffice\s?b\.?(ox|in)?(\s[0-9]))/i;if(value.match(pattern1)){if(value.match(pattern2)){return true;}return false;}else{if(value.length>6){return true;}}return false;},"Please specify a valid address or P.O. Box");jQuery.validator.addMethod("birthdate",function(value,element){if(_birthdateVerify){return true;}return false;},"Please specify a valid birthdate");jQuery.validator.addMethod("nowhitespace",function(value,element){return this.optional(element)||/^\S+$/i.test(value);},"<p>No white space please</p>");jQuery.validator.addMethod("validcreditcard",function(value,element){var pattern1=/(^(?:4[0-9]{12}(?:[0-9]{3})?|5[1-5][0-9]{14}|6(?:011|5[0-9][0-9])[0-9]{12}|3[47][0-9]{13}|3(?:0[0-5]|[68][0-9])[0-9]{11}|(?:2131|1800|35\d{3})\d{11})$)/i;if(value.match(pattern1)){return true;}return false;},"<p>Your Credit Card Number is not valid. Please check it and try again.</p>");jQuery.validator.addMethod("validexpiry",function(value,element){if(_creditExpiryVerify){return true;}return false;},"<p>Your Credit Card Expiry Date is not valid. Please check it and try again.</p>");jQuery.validator.addMethod("validexpiryautobill",function(value,element){if(_creditExpiryVerifyAutoBill){return true;}return false;},"<p>Your Credit Card Expiry Date is not valid. Please check it and try again.</p>");var waitForFinalEvent=(function(){var timers={};return function(callback,ms,uniqueId){if(!uniqueId){uniqueId="Don't call this twice without a uniqueId";}if(timers[uniqueId]){clearTimeout(timers[uniqueId]);}timers[uniqueId]=setTimeout(callback,ms);};})();function placeHolderFix(element){var originalValue;var is_chrome=window.chrome;if(is_chrome){$(element).val("");}if(navigator.appVersion.indexOf("MSIE")!==-1){originalValue=$(element).val();}else{originalValue=$(element).attr("placeholder");}var placeAttr=$(element).attr("placeholder");$(element).focus(function(){$(element).attr("placeholder","");if(navigator.appVersion.indexOf("MSIE")!==-1&&$(element).val()==originalValue){$(element).val("");}});$(element).blur(function(){$(element).attr("placeholder",placeAttr);if(navigator.appVersion.indexOf("MSIE")!==-1&&$(element).val()==""){$(element).attr("value",originalValue);}});}function toggleDrawer(val){$(".results-dropdown").hide();var locationDrawer=document.getElementById("drawer-location");var loginDrawer=document.getElementById("drawer-log-in");var cartDrawer=document.getElementById("drawer-cart");var searchDrawer=document.getElementById("drawer-search");if(val=="location"){loginDrawer.style.height=0;cartDrawer.style.height=0;searchDrawer.style.height=0;if(locationDrawer.clientHeight){locationDrawer.style.height=0;}else{var wrapper=$("#drawer-location .form-container").height();wrapper=200;locationDrawer.style.height=wrapper+"px";}}else{if(val=="login"){locationDrawer.style.height=0;cartDrawer.style.height=0;searchDrawer.style.height=0;if(loginDrawer.clientHeight){loginDrawer.style.height=0;}else{var wrapper=$("#drawer-log-in .form-container").height();wrapper=300;loginDrawer.style.height=wrapper+"px";}}else{if(val=="cart"){locationDrawer.style.height=0;loginDrawer.style.height=0;searchDrawer.style.height=0;if(cartDrawer.clientHeight){$("#drawer-cart .drawer-wrapper").slideUp(400);cartDrawer.style.height=0;}else{$("#drawer-cart .drawer-wrapper").show();cartDrawer.style.height="auto";$("#drawer-cart .drawer-wrapper").hide();$("#drawer-cart .accordion-footer .columns").css({"height":"auto"});$("#drawer-cart .drawer-wrapper").slideDown(400);}}else{if(val=="search"){locationDrawer.style.height=0;loginDrawer.style.height=0;cartDrawer.style.height=0;if(searchDrawer.clientHeight){searchDrawer.style.height=0;}else{var wrapper=$("#drawer-search .drawer-wrapper").height();$("#drawer-search").css("height",wrapper);}}else{locationDrawer.style.height=0;loginDrawer.style.height=0;cartDrawer.style.height=0;searchDrawer.style.height=0;}}}}}function openLocationDrawer(){if($("body").hasClass("mobile")){mobileLocator();}else{toggleDrawer("location");$("#drawer-location").toggleClass("open");$("#drawer-location").toggleClass("closed");$("#drawer-location input:not([type=hidden]):first").focus();$("#li-log-in a, #li-cart a#cart-img, #li-search a").removeClass("open");$("#li-location a").toggleClass("open");$("#drawer-indicator").removeClass();$("#drawer-utility-indicator").removeClass("dui-log-in").toggleClass("dui-location");$(".drawer-utility").css("border-top","0");$("#drawer-location").css("border-top","1px solid #484848");}}function openMyAccountDrawer(){toggleDrawer("login");$("#drawer-log-in").toggleClass("open");$("#drawer-log-in").toggleClass("closed");$("#drawer-log-in input:not([type=hidden]):first").focus();$("#li-location a, #li-cart a#cart-img, #li-search a").removeClass("open");$("#li-log-in a").toggleClass("open");$("#drawer-indicator").removeClass();$("#drawer-utility-indicator").removeClass("dui-location").toggleClass("dui-log-in");$(".drawer-utility").css("border-top","0");$("#drawer-log-in").css("border-top","1px solid #484848");}function openCartDrawer(){toggleDrawer("cart");$("#drawer-cart").toggleClass("open");$("#drawer-cart").toggleClass("closed");$("#li-location a, #li-log-in a, #li-search a").removeClass("open");$("#li-cart a#cart-img").toggleClass("open");$("#drawer-utility-indicator").removeClass();$("#drawer-indicator").removeClass("di-search").toggleClass("di-cart");}function openSearchDrawer(){toggleDrawer("search");$("#drawer-search").toggleClass("open");$("#drawer-search").toggleClass("closed");$("#drawer-search input:not([type=hidden]):first").focus();$("#li-location a, #li-log-in a, #li-cart a#cart-img").removeClass("open");$("#li-search a").toggleClass("open");$("#drawer-utility-indicator").removeClass();$("#drawer-indicator").removeClass("di-cart").toggleClass("di-search");}function initDrawers(){$("#li-location a, .close-location, .alert-box a:not(.no-drawer), .open-zip-drawer").on("click",function(){openLocationDrawer();});$("#li-log-in a, .close-log-in, #li-log-out a").on("click",function(){openMyAccountDrawer();});$("#li-cart a, .close-cart").on("click",function(){openCartDrawer();});$("#li-search a, .close-search").on("click",function(){openSearchDrawer();});$("li.cart-icon").on("click",function(){$("#drawer-cart").show();toggleDrawer("cart");$("#drawer-cart").toggleClass("open");$("#drawer-cart").toggleClass("closed");});$(".close-drawer").on("click",function(){$("#drawer-log-in input:not([type=hidden]):first").focus();$("#drawer-log-in input:not([type=hidden]):first").blur();});}function swiperOptions(){$(".swiper-container:visible").each(function(){if($(this).attr("id")=="accessories-listing-swiper"){$(this).swiper({mode:"horizontal",slidesPerView:1,centeredSlides:true,watchActiveIndex:true,initialSlide:0,paginationClickable:true,pagination:".pagination",onSlideChangeEnd:function(e){addClasses(e);}});}else{$(this).swiper({mode:"horizontal",slidesPerView:1,centeredSlides:true,watchActiveIndex:true,initialSlide:0,onSlideChangeEnd:function(e){addClasses(e);}});}var $swipers=$(this);$swipers.siblings(".prev").click(function(e){e.preventDefault();$swipers.data("swiper").swipePrev();addClasses(e);});$swipers.siblings(".next").click(function(e){e.preventDefault();$swipers.data("swiper").swipeNext();addClasses(e);});function addClasses(e){var totalSlides=$swipers.data("swiper").slides.length;var activeIndex=e.activeIndex;if(activeIndex==0){$swipers.siblings(".prev").addClass("disabled");}else{if(activeIndex==totalSlides-1){$swipers.siblings(".next").addClass("disabled");}else{$swipers.siblings(".next").removeClass("disabled");$swipers.siblings(".prev").removeClass("disabled");}}}});}function mobileLocator(){var mobileLocationDrawer=document.getElementById("drawer-mobile-location");if(mobileLocationDrawer.clientHeight){mobileLocationDrawer.style.height=0;}else{var wrapper=$("#drawer-mobile-location .form-container").height();wrapper=420;mobileLocationDrawer.style.height=wrapper+"px";}}function showZipResults(){$("#zip-results").css({"height":"0"});$("#drawer-location").css({"padding-bottom":"40px"});var zipResultsDropdown=document.getElementById("zip-results");var wrapper=$("#zip-results table").height();var currentPadding=$("#drawer-location").height();var newHeight=currentPadding+wrapper;$("#drawer-location").css({"padding-bottom":newHeight});zipResultsDropdown.style.height=wrapper+"px";}function mobileAccordion(){$(".mobile-accordion .mobile-trigger").click(function(){var fieldsetWrapper=$(this).parent("fieldset");if(!fieldsetWrapper.hasClass("current")){$(this).closest(".mobile-accordion").find(".current").removeClass("current");}fieldsetWrapper.toggleClass("current");return false;});}function scrollToHash(){var $root=$("html, body");$("a.scroll-link").click(function(){var href=$.attr(this,"href");$root.animate({scrollTop:$(href).offset().top},500,function(){window.location.hash=href;});return false;});}function removePlaceholderText(){var placeholderSupport="placeholder" in document.createElement("input");if(!placeholderSupport){$("input[placeholder]:not(.ie-ignore)").focus(function(){var input=$(this);if(input.val()==input.attr("placeholder")){input.val("");input.removeClass("placeholder");}}).blur(function(){var input=$(this);if(input.val()==""||input.val()==input.attr("placeholder")){input.addClass("placeholder");input.val(input.attr("placeholder"));}}).blur();}}function initLayout(){var w=$(document).width();var url=location.pathname;if(w<769){swiperOptions();$("body").addClass("mobile");$("#footer-sitemap").addClass("section-container accordion");$("#phone-filters-dropdown").addClass("mobile-accordion");$("#section-filters .top-bar").addClass("expanded");$("#compare-bar").css("visibility","hidden");$(".three-callouts a.prev").addClass("disabled");$("#li-log-in a").text("Log In");$("#drawer-indicator").removeClass();$("#drawer-utility-indicator").removeClass();$(".open-zip, .alert-box a:not(.no-drawer)").on("click",function(){mobileLocator();});}else{$("#nav-utility").removeClass("mobile-utility");$("#drawer-mobile-location").css({"height":"0"});$("#inner-wrap").css({"right":"auto","left":"auto"});$("#li-log-in a").text("My Account");$("#phone-filters-dropdown").removeClass("mobile-accordion");$("#footer-sitemap").removeClass("section-container accordion");scrollToHash();}}function initClickToChatModal(){$("#chat-button #chat-close").click(function(){$("#cricket-modal-chat").hide();$("#chat-button").hide();$("#chat-button").css("visibility","hidden");});}$(function(){initDrawers();initLayout();removePlaceholderText();initClickToChatModal();$("#drawer-cart .accordion section p.title").click(function(e){e.preventDefault();if($(this).parent().hasClass("active")){$(this).parent().removeClass("active");}else{$(this).parent().addClass("active");}});mobileAccordion();$(window).resize(function(){initLayout();});$("#chat-button .close-chat-button").click(function(){$("#chat-button").hide();});$("#chat-button #chat-button-image").click(function(){$("#chat-button").hide();$("#chat-container").show();chatG.startChat();});$("#chat-container-header-close").click(function(){$("#chat-container").hide();});$("#chat-container-header-title").click(function(){if($("#chat-container").css("bottom")!="0px"){$("#chat-container-header-minimize").click();}});$("#chat-container-header-minimize").click(function(){if($("#chat-container").css("bottom")=="0px"){$("#chat-container").css("bottom","-235px");}else{$("#chat-container").css("bottom","0px");}});if($("#constructor").hasClass("homepage")){$("#disclaimer-container p").show();}$("#drawer-cart").addClass("closed");$("#drawer-search").addClass("closed");$("#drawer-log-in").addClass("closed");$("#drawer-location").addClass("closed");if($("html").hasClass("lt-ie9")){if($(".section-container").hasClass("auto")){$(".section-container").removeClass("auto").addClass("tabs");$(".section-container").attr("data-section","tabs");$(".section-container").foundation("section","reflow");}}$("#open-side-menu a").on("click",function(e){e.preventDefault();$("#inner-wrap").animate({right:"90%"},300);$("#nav-utility").addClass("mobile-utility");$(".indicator-black-west").fadeIn();$(".account-icon a").toggleClass("open");});$(".side-menu-close a").on("click",function(e){e.preventDefault();$("#inner-wrap").animate({right:"0"},300);$(".indicator-black-west").hide();$(".account-icon a").toggleClass("open");});$("#btn-check-zip").click(function(){$("#checkZipForm").submit();});$("#checkZipForm").validate({rules:{"zip":{required:true,rangelength:[5,5]}},messages:{"zip":{required:"<p>Please enter a valid five-digit zip code.</p>",rangelength:"<p>Please enter a valid five-digit zip code.</p>"}},errorPlacement:function(error,element){$(".zip-results").hide();$(".errors-location").html("");error.appendTo(".errors-location");$(".errors-location").show();},onkeyup:false,submitHandler:function(form){$(".errors-location").html("");$(".zip-results").show();}});$("#btn-mobile-check-zip").click(function(){$("#checkMobileZipForm").submit();});$("#checkMobileZipForm").validate({rules:{"zipchange":{required:true,zipcode:true}},messages:{"zipchange":'<p>We currently do not activate new Cricket accounts in your area. <a href="#">Sign up</a> to get notifications on availability.</p>'},errorPlacement:function(error,element){$(".mobile-zip-results").hide();$(".errors-mobile-location").html("");error.appendTo(".errors-mobile-location");$(".errors-mobile-location").show();},onkeyup:false,submitHandler:function(form){$(".errors-mobile-location").html("");$(".mobile-zip-results").show();$("#zipchange").blur();}});$("#btn-login").on("click",function(){$("#checkLoginForm").submit();});$("#checkLoginForm").validate({rules:{"phone":{required:true,phoneUS:true},"password":{required:true}},messages:{"phone":"<p>You could not be authenticated. Please check your phone number and password.</p>","password":"<p>You could not be authenticated. Please check your phone number and password.</p>"},errorPlacement:function(error,element){$(".mobile-zip-results").hide();$(".errors-login").html("");error.appendTo(".errors-login");$(".errors-login").show();},onkeyup:false,submitHandler:function(form){$(".errors-login").html("");toggleDrawer("login");$("#drawer-log-in input:not([type=hidden]):first").focus();$("#li-location a, #li-cart a#cart-img, #li-search a").removeClass("open");$("#li-log-in a").toggleClass("open");$("#drawer-indicator").removeClass();$("#drawer-utility-indicator").removeClass("dui-location").toggleClass("dui-log-in");$(".drawer-utility").css("border-top","0");$("#drawer-log-in").css("border-top","1px solid #484848");$("#mobileLoginForm").hide();$("#li-log-in").hide();$("#li-log-out, #li-username").css({"display":"inline-block"});}});$("#btn-mobile-login").on("click",function(){$("#mobileLoginForm").submit();});$("#mobileLoginForm").validate({rules:{"mobile-phone":{required:true,phoneUS:true},"mobile-password":{required:true}},messages:{"mobile-phone":"<p>You could not be authenticated. Please check your phone number and password.</p>","mobile-password":"<p>You could not be authenticated. Please check your phone number and password.</p>"},errorPlacement:function(error,element){$(".errors-mobile-login").html("");error.appendTo(".errors-mobile-login");$(".errors-mobile-login").show();},onkeyup:false,submitHandler:function(form){$(".errors-mobile-login").html("");$("#mobileLoginForm").hide();$("#li-log-in").hide();$("#li-log-out, #li-username").css({"display":"inline-block"});$(".mobile-utility h3").css("padding-bottom","50px");}});$("#btn-email-signup").on("click",function(e){e.preventDefault();$("#emailSignupForm").submit();});$("#emailSignupForm").validate({rules:{"email-sign-up":{email:true,required:true}},messages:{"email-sign-up":"<p>Please enter a valid email address.</p>"},errorPlacement:function(error,element){$(".errors-email-signup").html("");error.appendTo(".errors-email-signup");$(".errors-email-signup").show();},onkeyup:false,submitHandler:function(form){}});if($("html").hasClass("lt-ie9")){$(".carousel-prev, .carousel-next, .plans-prev, .plans-next").hide();}var homePagePhones=$("#homepage-phones").swiper({mode:"horizontal",slidesPerView:3,visibilityFullFit:true,watchActiveIndex:true,initialSlide:0,onImagesReady:function(e){addClassesPhones(e);},onSlideChangeEnd:function(e){addClassesPhones(e);}});$(".carousel-prev").on("click",function(e){e.preventDefault();homePagePhones.swipePrev();addClassesPhones(e);});$(".carousel-next").on("click",function(e){e.preventDefault();homePagePhones.swipeNext();addClassesPhones(e);});function addClassesPhones(e){var totalSlides=$("#homepage-phones .swiper-slide").length;var activeIndex=e.activeIndex;if(totalSlides>3){if(activeIndex==0){$(".carousel-prev").addClass("disabled");}else{if(activeIndex==totalSlides-3){$(".carousel-next").addClass("disabled");}else{$(".carousel-next").removeClass("disabled");$(".carousel-prev").removeClass("disabled");}}}else{$(".carousel-next").addClass("disabled");$(".carousel-prev").addClass("disabled");}}var homePagePlans=$("#homepage-plans").swiper({mode:"horizontal",slidesPerView:3,visibilityFullFit:true,watchActiveIndex:true,initialSlide:0,onImagesReady:function(e){addClassesPlans(e);},onSlideChangeEnd:function(e){addClassesPlans(e);}});$(".plans-prev").on("click",function(e){e.preventDefault();homePagePlans.swipePrev();addClassesPlans(e);});$(".plans-next").on("click",function(e){e.preventDefault();homePagePlans.swipeNext();addClassesPlans(e);});function addClassesPlans(e){var totalSlides=$("#homepage-plans .swiper-slide").length;var activeIndex=e.activeIndex;if(totalSlides>3){if(activeIndex==0){$(".plans-prev").addClass("disabled");}else{if(activeIndex==totalSlides-3){$(".plans-next").addClass("disabled");}else{$(".plans-next").removeClass("disabled");$(".plans-prev").removeClass("disabled");}}}else{$(".plans-next").addClass("disabled");$(".plans-prev").addClass("disabled");}}if($("#constructor").hasClass("section-search-results")){var searchDefaultText=$("#search-full");placeHolderFix(searchDefaultText);}var emailSignup=$("#email-sign-up");placeHolderFix(emailSignup);});var lpChatConfig={lpProtocol:document.location.toString().indexOf("https:")==0?"https":"http",lpNumber:"4968591",apiKey:"8f4e6cb33f0a4dd19c263d33f260235f",lpServer:"dev.liveperson.net",jsApiSrcDomain:"dev.liveperson.net",skill:"sales-english",onLoad:function(){window.lpc=new lpChat();},onLine:"myLineHandler",onError:"myErrorHandler",onAvailability:"myOnAvailability"};$(function(){window.chatG=new chatGui({divID:"chat-container-wrapper",width:311,height:231,visitor:"Me",autoResumechat:true,resizable:false,draggable:false,showTime:false,rememberPosition:true},lpChatConfig);chatG.init();});lpChatConfig.lpAddScript=function(src,ignore){var c=lpChatConfig;if(typeof(c.lpProtocol)=="undefined"){c.lpProtocol=(document.location.toString().indexOf("https:")==0)?"https":"http";}if(typeof(src)=="undefined"||typeof(src)=="object"){src=c.lpChatSrc?c.lpChatSrc:"/hcp/html/lpChatAPI.js";}if(src.indexOf("http")!=0){src=c.lpProtocol+"://"+c.lpServer+src+"?site="+c.lpNumber;}else{if(src.indexOf("site=")<0){if(src.indexOf("?")<0){src=src+"?";}else{src=src+"&";}src=src+"site="+c.lpNumber;}}var s=document.createElement("script");s.setAttribute("type","text/javascript");s.setAttribute("charset","iso-8859-1");s.setAttribute("src",src);document.getElementsByTagName("head").item(0).appendChild(s);};lpChatConfig.lpAddScript();document.onkeydown=TabFunc;function TabFunc(event){if($("#notification-style-3.open").length>0){if(event.which||event.charCode||event.keyCode){var firstButton=$("#notification-style-3").find(".orange-button");var secondButton=$("#notification-style-3").find(".green-button");if(event.which==9||event.charCode==9||event.keycode==9){if($("#notification-style-3").css("display")!="none"){event.preventDefault?event.preventDefault():event.returnValue=false;if(firstButton.hasClass("hover")){firstButton.removeClass("hover");secondButton.addClass("hover");}else{secondButton.removeClass("hover");firstButton.addClass("hover");}}}else{if(event.which==13||event.charCode==13||event.keycode==13){if(firstButton.hasClass("hover")){event.preventDefault?event.preventDefault():event.returnValue=false;firstButton.triggerHandler("click");firstButton.removeClass("hover");}else{if(secondButton.hasClass("hover")){event.preventDefault?event.preventDefault():event.returnValue=false;secondButton.triggerHandler("click");secondButton.removeClass("hover");}}}}}firstButton.hover(function(){if(firstButton.hasClass("hover")){firstButton.removeClass("hover");}else{if(secondButton.hasClass("hover")){secondButton.removeClass("hover");}}});secondButton.hover(function(){if(secondButton.hasClass("hover")){secondButton.removeClass("hover");}else{if(firstButton.hasClass("hover")){firstButton.removeClass("hover");}}});}}$(function(){if(window.location.href.indexOf("results")>-1){$("#li-search a").addClass("open");}if(window.location.href.indexOf("invalid")>-1){$("#li-search a").addClass("open");}function searchInit(){var url=location.pathname;if(url.indexOf("predictive-search-3")>-1){$("#outer-wrap").addClass("predictive-search-nozip");$("#li-mobile-search").parent("#nav-main").addClass("predictive-search-nozip");}else{if(url.indexOf("predictive-search-2")>-1){$("#outer-wrap").addClass("predictive-search-zip predictive-search-loading");$("#li-mobile-search").parent("#nav-main").addClass("predictive-search-zip predictive-search-loading");}else{if(url.indexOf("predictive-search-4")>-1){$("#outer-wrap").addClass("predictive-search-nozip predictive-search-loading");$("#li-mobile-search").parent("#nav-main").addClass("predictive-search-nozip predictive-search-loading");}else{$("#outer-wrap").addClass("predictive-search-zip");$("#li-mobile-search").parent("#nav-main").addClass("predictive-search-zip");}}}if($("#outer-wrap, #li-mobile-search").hasClass("predictive-search-loading")){$(".acLoading").hide();}else{$(".acLoading").remove();}$(".search-newOLD").autocomplete({url:"/search/results.html",showResult:function(value,data){if($("body").hasClass("mobile")){if($("#nav-main").hasClass("predictive-search-nozip")){return'<span class="mobile-result"><a href="/search/search-results-all-nozip.php">'+value+"</a></span>";}else{return'<span class="mobile-result"><a href="/search/search-results-all.php">'+value+"</a></span>";}}else{return"<span>"+value+"</span>";}},onItemSelect:function(item){$(".acResults").hide();if($("#outer-wrap").hasClass("predictive-search-zip")){$("#drawer-search").find("#predictive-search-zip").show();}else{if($("#outer-wrap").hasClass("predictive-search-nozip")){$("#drawer-search").find("#predictive-search-nozip").show();}}var wrapper=$("#drawer-search .drawer-wrapper").height();$("#drawer-search").css("height",wrapper);},mustMatch:true,autoWidth:"",loadingClass:"acLoading",useCache:false,selectFirst:false,autoFill:false,selectOnly:true,remoteDataType:"text",cellSeparator:"|"});}$(".acLoading").hide();$(".search-new").keyup(function(){var searchTerm=$(this).val();if($(this).val().length>2){populateTypeAheadResults();}else{$(".results-dropdown").hide();$(".acLoading").hide();document.getElementById("typeAheadSearchResultsUL").innerHTML="";}});$("#search-full").keyup(function(){var searchTerm=$(this).val();if($(this).val().length>2){populateTypeAheadResultsAgain();}else{$(".results-dropdown").hide();$(".acLoading").hide();document.getElementById("typeAheadSearchResultsUL").innerHTML="";}});});$(function(){function toggleAccessoriesSubnav(){if($(".section-accessories-listing").length>0){$(".sub-nav dd a").on("click",function(e){e.preventDefault();$(".sub-nav dd").removeClass("active");$(this).parent().addClass("active");if($(".row.bydevice").hasClass("hide")){$(".row.bydevice").removeClass("hide");}else{$(".row.bydevice").addClass("hide");}});}}function productImageGallery(){if($("#constructor").hasClass("section-phones-details")||$("#constructor").hasClass("section-accessory-details")){var colorsLength=$("#product-content p.colors").children().length;var colorsTagCheck=$("#product-content p.colors");if(colorsTagCheck){if(colorsLength>1){$("p.colors").show();$(".color-title").show();}else{$("p.colors").hide();$(".color-title").hide();}}else{$("p.colors").hide();$(".color-title").hide();}var productAssetsLength=$("#product-thumbs ul").children().length;var productULcheck=$("#product-thumbs ul");if(!($("#product-thumbs ul").hasClass("hide-for-small"))){if(productAssetsLength>1){$("#product-thumbs").show();$("#product-image img").css("margin-bottom","100px");}else{$("#product-thumbs").hide();$("#product-image img").css("margin-bottom","0");}}else{$("#product-thumbs").hide();$("#product-image img").css("margin-bottom","0");}$("#product-thumbs a").on("click",function(e){e.preventDefault();$("#product-thumbs a").removeClass("active");$(this).addClass("active");var thumbSrc=$("img",this).attr("src");var imageSrc=thumbSrc.replace(/thumb\//g,"");$("#product-image img").hide().attr("src",imageSrc).fadeIn(500);});$(".color-swatch").on("click",function(e){e.preventDefault();var swatchSKU=$(this).attr("id").replace(/swatch-/g,"");var sku=$("#product-sku").val();if(swatchSKU==sku){return false;}else{$("#product-sku").val(swatchSKU);$("#product-thumbs a").removeClass("active");$("#product-thumbs a").first().addClass("active");$(".colors a").removeClass("active");$(this).addClass("active");if($("#constructor").hasClass("section-accessory-details")){var imageSrc="/img/accessory-detail/products/"+swatchSKU+"/1.png";var thumbSrc="/img/accessory-detail/products/"+swatchSKU+"/thumb/";}else{var imageSrc="/img/phone-detail/products/"+swatchSKU+"/1.png";var thumbSrc="/img/phone-detail/products/"+swatchSKU+"/thumb/";}$("#product-image img").hide().attr("src",imageSrc).fadeIn(500);var productThumbs=$("#product-thumbs img");var counter=1;$.each(productThumbs,function(index){if(index==productThumbs.length){return false;}$(productThumbs[index]).attr("src",thumbSrc+counter+".png");counter++;});}});}}function UpdateTableHeaders(){$(".persist-area").each(function(){var el=$(this),offset=el.offset(),scrollTop=$(window).scrollTop(),floatingHeader=$(".floatingHeader",this);if((scrollTop>offset.top)&&(scrollTop<offset.top+el.height())){floatingHeader.css({"visibility":"visible"});}else{floatingHeader.css({"visibility":"hidden"});}});}function comparePhonesStickyBar(){if($("#constructor").hasClass("section-phone-compare")){var clonedHeaderRow;$(".persist-area").each(function(){clonedHeaderRow=$(".persist-header",this);clonedHeaderRow.before(clonedHeaderRow.clone()).css("width",clonedHeaderRow.width()).addClass("floatingHeader");});$(window).scroll(UpdateTableHeaders).trigger("scroll");}}function filterSelect(){var $container=$("#phone-filters-dropdown");var filterBar=$(".filter-bar");$container.find("input").attr("checked",false).siblings("span").removeClass("checked");var showFilterBar=function(){filterBar.show();};var hideFilterBar=function(){filterBar.hide();};var addToFilterBar=function(filter){var filterText=filter.text();var link=$('<a href="#">'+filterText+"</a>");link.prop("rel",filter.prop("for"));filterBar.append(link);};var removeFromFilterBar=function(filterName){var checkbox=$container.find("label[for="+filterName+"]");var link=filterBar.find("a[rel="+filterName+"]");checkbox.find("span").removeClass("checked");checkbox.find("input").prop("checked",false);link.remove();};var evaluateFilters=function(event){var filter=$(event.currentTarget);var filterInput=filter.find("input");var filterCheck=$container.find("input:checked").length;var filterChecked=filterInput.prop("checked");var filterName=filter.prop("for");if(filterChecked){addToFilterBar(filter);}else{removeFromFilterBar(filterName);}if(filterCheck>0){showFilterBar();}else{hideFilterBar();}};$container.find("label").click(function(event){window.setTimeout(function(){evaluateFilters(event);},100);});filterBar.on("click","a",function(event){event.preventDefault();var filter=$(event.currentTarget);var filterName=filter.prop("rel");removeFromFilterBar(filterName);if($container.find("input:checked").length>0){showFilterBar();}else{hideFilterBar();}});}(function($){var PhoneComparison=function(scope){var comparisonBar=$("#compare-bar"),checkboxes=scope.find("div.compare");scope.find("input").attr("checked",false).siblings("span").removeClass("checked");$("#compare-bar").foundation("magellan","reflow");var showComparisonBar=function(){comparisonBar.css("visibility","visible");comparisonBar.addClass("shown");};var hideComparisonBar=function(){comparisonBar.css("visibility","hidden");comparisonBar.removeClass("shown");};var lockCheckboxes=function(){checkboxes.find("input:unchecked").attr("disabled",true).siblings("span").addClass("disabled");};var unlockCheckboxes=function(){checkboxes.find("input").attr("disabled",false).siblings("span").removeClass("disabled");};var addTooltip=function(){checkboxes.find("input:unchecked").parent().addClass("has-tip").attr("data-tooltip","").attr("title","Sorry, you can only compare up to four phones at a time.");};var removeTooltip=function(){checkboxes.find("input").parent().removeClass("has-tip").removeAttr("data-tooltip").removeAttr("title");};var clearCheckboxes=function(){checkboxes.find("input").attr("checked",false).siblings("span").removeClass("checked");};var addToComparisonBar=function(phone){var phoneImage=phone.find("img"),image=$("<img>",{"src":phoneImage.attr("src"),"width":"16","height":"33"});comparisonBar.append(image);};var removeFromComparisonBar=function(phone){var phoneImage=phone.find("img");comparisonBar.find('img[src="'+phoneImage.attr("src")+'"]').remove();};var evaluate=function(event){var checked=checkboxes.find("input:checked").length;var phone=$(event.target).parents(".phone"),phoneChecked=phone.find("input").prop("checked");if(phoneChecked){addToComparisonBar(phone);}else{removeFromComparisonBar(phone);}if(checked>=4){lockCheckboxes();addTooltip();}else{unlockCheckboxes();removeTooltip();}if(checked>=2){showComparisonBar();}else{hideComparisonBar();}$(".clear").click(function(e){e.preventDefault();clearCheckboxes();unlockCheckboxes();removeFromComparisonBar(phone);hideComparisonBar();});};scope.click(function(event){window.setTimeout(function(){evaluate(event);},100);});};var Phone=function(scope){this.isChecked=function(){scope.find("input").prop("checked");};this.image=function(){scope.find("img");};};$.fn.phoneCompare=function phoneCompare(){return new PhoneComparison(this);};}(jQuery));toggleAccessoriesSubnav();filterSelect();comparePhonesStickyBar();productImageGallery();$(".phone-results").phoneCompare();var swiperPlans=$("#swiper-plans").swiper({mode:"horizontal",slidesPerView:3,visibilityFullFit:true,watchActiveIndex:true,initialSlide:0,onImagesReady:function(e){addClassesPlans(e);},onSlideChangeEnd:function(e){addClassesPlans(e);}});$(".swiper-plans-prev").on("click",function(e){e.preventDefault();swiperPlans.swipePrev();addClassesPlans(e);});$(".swiper-plans-next").on("click",function(e){e.preventDefault();swiperPlans.swipeNext();addClassesPlans(e);});function addClassesPlans(e){var totalSlides=$("#swiper-plans .swiper-slide").length;var activeIndex=e.activeIndex;if(totalSlides>3){if(activeIndex==0){$(".swiper-plans-prev").addClass("disabled");}else{if(activeIndex==totalSlides-3){$(".swiper-plans-next").addClass("disabled");}else{$(".swiper-plans-next").removeClass("disabled");$(".swiper-plans-prev").removeClass("disabled");}}}else{$(".swiper-plans-next").addClass("disabled");$(".swiper-plans-prev").addClass("disabled");}}$(".has-dropdown .label-wrapper label").on("click",function(){$("#phone-filters-dropdown").closest("ul.dropdown").addClass("hoverme");$(".section-phones-listing .phone-radios, .section-phones-listing .phone-results, .section-phones-listing .static-banner, .section-phones-listing .section-filters").on("click, mouseover",function(){$("#phone-filters-dropdown").closest("ul.dropdown").removeClass("hoverme");});});if($("html").hasClass("lt-ie9")){}else{if($("#constructor").hasClass("section-plans-listing")||$("#constructor").hasClass("section-plan-details")||$("#constructor").hasClass("section-phones-details")||$("#constructor").hasClass("section-accessory-details")){$("#tab-content .row .columns .section-container").removeClass("tabs").addClass("auto");$("#tab-content .row .columns .section-container").attr("data-section","auto");}}function showPhoneFilter(){$("#section-filters .top-bar").css("max-height","49px");$("#section-filters .top-bar-section").css("left","-100%");$("#section-filters .top-bar-section ul li.has-dropdown").addClass("moved");}$("#section-filters .top-bar-section li.moved ul li.js-genated h5 a").on("click",function(){alert("here");$("#section-filters .top-bar-section").css("left","0");});function showPhoneFilter(){$("#section-filters .top-bar").css("max-height","49px");$("#section-filters .top-bar-section").css("left","-100%");$("#section-filters .top-bar-section ul li.has-dropdown").addClass("moved");}$("#section-filters li.js-generated h5 a").on("click",function(){setTimeout(function(){$("#section-filters .top-bar-section").css("left","0px");},400);});});$(function(){function toggleAccordion(){$(".expand-all").on("click",function(e){e.preventDefault();$(this).closest("#accordion-content").find("section.active").removeClass("active");$(this).toggleClass("collapse-toggle");if($(this).hasClass("collapse-toggle")){$("#accordion-content .accordion section").addClass("active");$(this).html("Collapse All");}else{$("#accordion-content .accordion section").removeClass("active");$(this).html("Expand All");}});}function removeExistingPlans(){$(".remove").click(function(e){e.preventDefault();$(this).parent(".plan-item").animate({height:"toggle",width:"toggle",opacity:"toggle"},500);});$(".remove-mobile").click(function(e){e.preventDefault();var $removeContainer=$("#plan-callout .swiper-container");var index=$removeContainer.data("swiper").activeIndex;$removeContainer.data("swiper").removeSlide(index);var totalSlides=$removeContainer.data("swiper").slides.length;$removeContainer.data("swiper").reInit();if(totalSlides<=1){$removeContainer.siblings(".next").addClass("disabled");$removeContainer.siblings(".prev").addClass("disabled");}});}function adjustTitleSize(){$(".additional-feature-container").each(function(){var $quote=$(this).find("span.additional-feature-description");var $numWords=$quote.text().split(/[-\s]/).length;$limitWord=5;if($numWords>=$limitWord){$quote.addClass("smaller");}});}function sizeFeatureHeading(){if($("html").hasClass("lt-ie10")){}else{var featuresHeadingTopHeight=$(".features-heading-top").height();var featuresHeadingBottomHeight=$(".features-heading-bottom").height();var combinedHeight=featuresHeadingTopHeight+featuresHeadingBottomHeight;if(combinedHeight>352){$(".features-heading th").css("background","#109449");$(".features-heading th.bg-smartplan").css("background","#067533");}else{var topUp=352-featuresHeadingTopHeight;$(".features-heading-bottom").height(topUp);}}}toggleAccordion();removeExistingPlans();adjustTitleSize();if($("#constructor").hasClass("section-plans-listing")){sizeFeatureHeading();}});$(function(){if($("#constructor").hasClass("cart-static")){$("#li-cart a, .close-cart").unbind("click");$("#drawer-cart").css({"height":"auto"}).toggleClass("open");$("#drawer-cart").toggleClass("open");$("#li-location a, #li-log-in a, #li-search a").removeClass("open");$("#li-cart a#cart-img").toggleClass("open").css({"pointer":"crosshair"});$("#drawer-utility-indicator").removeClass();$("#drawer-indicator").removeClass("di-search").toggleClass("di-cart");$(".close-cart").css("visibility","hidden");}if($(document).width()>767){$("#drawer-cart section .content > .row").each(function(){if($(this).parent().parent().hasClass("active")){var detailsHeight=$(".details-container",this).height();var summaryHeight=$(".summary-container",this).height();}else{$(this).parent().parent().addClass("active");var detailsHeight=$(".details-container",this).height();var summaryHeight=$(".summary-container",this).height();$(this).parent().parent().removeClass("active");}if(detailsHeight>summaryHeight){$(".summary-container",this).height(detailsHeight);}});}$("#drawer-cart .quantity").keyup(function(){var buttonText=$(this).parent().find("a.quantity-button");if($(this).val()=="0"){buttonText.removeClass("btn-remove btn-update").addClass("btn-remove").text("Remove");}else{if($(this).val()>"1"){buttonText.removeClass("btn-remove btn-update").addClass("btn-update").text("Update");}else{buttonText.removeClass("btn-remove btn-update").text("");}}});$("#drawer-cart .quantity").each(function(){var buttonText=$(this).parent().find("a.quantity-button");if($(this).val()=="0"){buttonText.removeClass("btn-remove btn-update").addClass("btn-remove").text("Remove");}else{if($(this).val()>"1"){buttonText.removeClass("btn-remove btn-update").addClass("btn-update").text("Update");}else{buttonText.removeClass("btn-remove btn-update").text("");}}});});var _birthdateVerify;var _creditExpiryVerify=false;var _creditExpiryVerifyAutoBill=false;$(function(){var diffCardAutoBill=false;if($("#constructor").hasClass("section-checkout")){$("#li-cart a, li.cart-icon").unbind("click");$("#li-cart a, li.cart-icon").addClass("no-toggle");}else{$("#li-cart a, li.cart-icon").removeClass("no-toggle");}$("#li-cart a, li.cart-icon").click(function(){if($(this).hasClass("no-toggle")){}});$("#promo-value").click(function(e){e.preventDefault();if($("#promo-code").val()){$("#promo-code").removeClass().addClass("error");$(".promo-error").css("visibility","visible");}else{$("#promo-code").removeClass();$(".promo-error").css("visibility","hidden");}});function checkoutValidation(){$(".error-container").css("visibility","visible");$("#shipping-method-po-box").hide();if($(".section-checkout").hasClass("new")){termsState(true);}if($("a.btn-checkout-step-1").length>0){$("a.btn-checkout-step-1").css("display","inline-block");$("a.btn-checkout-step-1").next(".button").css("display","none");}if($("a.btn-checkout-step-2").length>0){$("a.btn-checkout-step-2").css("display","inline-block");$("a.btn-checkout-step-2").next(".button").css("display","none");}if($("a#btn-checkout-step-3-top").length>0){$("a#btn-checkout-step-3-top").css("display","inline-block");$("a#btn-checkout-step-3-top").next(".button").css("display","none");}$("a.btn-checkout-step-1").click(function(e){e.preventDefault();var month=$("#month").children("option:selected").val();var day=$("#day").children("option:selected").val();var year=$("#year").children("option:selected").val();birthdateVerification(month,day,year);var validated=$("#customer-info").valid();if(validated){$(this).css("display","none");$(this).next(".button").css("display","inline-block").removeAttr("href");}$("#customer-info").submit();});$("a.btn-checkout-step-2").click(function(e){e.preventDefault();creditExpiryVerification();var validated=$("#payment-info").valid();if(validated){$(this).css("display","none");$(this).next(".button").css("display","inline-block").removeAttr("href");}$("#payment-info").submit();});$("a#btn-checkout-step-3-top, a#btn-checkout-step-3-bottom").click(function(e){e.preventDefault();$(this).css("display","none");$(this).next(".button").css("display","inline-block").removeAttr("href");$("#customer-info").submit();});$("#customer-info").validate({onkeyup:false,onfocusout:false,rules:{"first-name":{required:true},"first-name-shipping-address":{required:true},"first-name-billing-address":{required:true},"last-name":{required:true},"last-name-shipping-address":{required:true},"last-name-billing-address":{required:true},"address":{required:true,poBox:true},"address-shipping-address":{required:true,poBox:true},"address-billing-address":{required:true,poBox:true},"phone":{required:true,phoneUS:true},"email":{required:true,email:true},"month":{required:true,birthdate:true},"day":{required:true,birthdate:true},"year":{required:true,birthdate:true}},messages:{"first-name":"<p>Please enter a first name.</p>","first-name-shipping-address":"<p>Please enter a first name under shipping address.</p>","first-name-billing-address":"<p>Please enter a first name under billing address.</p>","last-name":"<p>Please enter a last name.</p>","last-name-shipping-address":"<p>Please enter a last name under shipping address.</p>","last-name-billing-address":"<p>Please enter a last name under billing address.</p>","address":"<p>Please check your address or PO Box.</p>","address-shipping-address":"<p>Please check your address or PO Box under shipping address.</p>","address-billing-address":"<p>Please check your address or PO Box under billing address.</p>","phone":"<p>Please check your phone number.</p>","email":"<p>Please check your email address.</p>","month":"<p>Please check your birthday month.</p>","day":"<p>Please check your birthday.</p>","year":"<p>Please check your birthday year.</p>"},success:"valid",errorContainer:".error-container"});$("#payment-info").validate({onkeyup:false,onfocusout:false,onclick:false,rules:{"first-name":{required:true},"first-nameAbp":{required:true},"last-name":{required:true},"last-nameAbp":{required:true},"PaymentDataVO":{nowhitespace:true,validcreditcard:true,required:true,digits:true},"abpPaymentDataVO":{nowhitespace:true,validcreditcard:true,required:true,digits:true},"month":{required:true,validexpiry:true},"monthAbp":{required:true,validexpiryautobill:true},"different-payment-info":{required:true},"day-auto-bill":{required:true},"year":{required:true,validexpiry:true},"yearAbp":{required:true,validexpiryautobill:true},"cvcnumber":{required:true,digits:true,minlength:3,maxlength:4},"cvcnumberAbp":{required:true,digits:true,minlength:3,maxlength:4},"terms":{required:true}},success:"valid",messages:{"first-name":"<p>Please enter a first name.</p>","first-nameAbp":"<p>Please enter a first name under auto bill.</p>","last-name":"<p>Please enter a last name.</p>","last-nameAbp":"<p>Please enter a last name under auto bill.</p>","PaymentDataVO":{required:"<p>Please enter your credit card number.</p>"},"abpPaymentDataVO":{},"month":"<p>Please check your credit card expiry month.</p>","year":"<p>Please check your credit card expiry year.</p>","monthAbp":"<p>Please check your credit card expiry month.</p>","yearAbp":"<p>Please check your credit card expiry year.</p>","cvcnumber":"<p>Your cvc number should be 3 to 4 digits.</p>","cvcnumberAbp":"<p>Your cvc number should be 3 to 4 digits under auto bill.</p>","terms":"<p>Please accept the Automatic Bill Pay terms & conditions.</p>"},highlight:function(element,errorClass,validclass){if(element.type=="checkbox"){$(element).addClass("error").removeClass("valid");$(element).parent("#terms-wrapper").removeClass("valid").addClass("error-border");}else{$(element).addClass("error").removeClass("valid");}},unhighlight:function(element,errorClass,validClass){if(element.type=="checkbox"){$(element).removeClass("error").addClass("valid");$(element).parent("#terms-wrapper").removeClass("error-border").addClass("valid");}else{$(element).removeClass("error").addClass("valid");}},errorPlacement:function(error,element){if(element.attr("name")=="terms"){error.insertBefore(element);}else{error.insertAfter(element);}},errorContainer:".error-container"});}function creditExpiryVerification(){var month=$("#month").children("option:selected").val();var year=$("#year").children("option:selected").val();dateExpiryCheck(month,year,false);var monthAutoBill=$("#monthAbp").children("option:selected").val();var yearAutoBill=$("#yearAbp").children("option:selected").val();if($("#different-payment-info").css("display")!="none"){dateExpiryCheck(monthAutoBill,yearAutoBill,true);}}function dateExpiryCheck(month,year,autobill){var month=month;var year=year;var autobill=autobill;if(month!=undefined&&year!=undefined){var todayDate=new Date();var todayMonth=todayDate.getMonth()+1;var todayYear=todayDate.getFullYear();var checkVerify;if(todayYear==year){if(todayMonth==month){checkVerify=true;}else{if(todayMonth<month){checkVerify=true;}else{if(todayMonth>month){checkVerify=false;}}}}else{if(todayYear>year){checkVerify=false;}else{if(todayYear<year){checkVerify=true;}}}if(autobill){_creditExpiryVerifyAutoBill=checkVerify;}else{_creditExpiryVerify=checkVerify;}}}function poboxValidation(){$("#address").on("input",function(e){var diffShipAddress=$("different-shipping-address");if(diffShipAddress.length>0){return;}poboxValidationMatch(e);});$("#address-shipping-address").on("input",function(e){poboxValidationMatch(e);});$("#address").on("propertychange",function(e){var diffShipAddress=$("different-shipping-address");if(diffShipAddress.length>0){return;}poboxValidationMatch(e);});$("#address-shipping-address").on("propertychange",function(e){poboxValidationMatch(e);});}function poboxValidationMatch(e,value){var inputValue;if(value){inputValue=value;}else{inputValue=e.target.value;}var pattern=/(^p\.?\s?o\.?\s?b\.?(ox|in)?(\s|[0-9])|post\soffice\s?b\.?(ox|in))/i;if(inputValue.match(pattern)){$("#shipping-method-free").hide();$("#shipping-method-po-box").show();}else{$("#shipping-method-free").show();$("#shipping-method-po-box").hide();}}function birthdateValidation(){_birthdateVerify=false;var month=$("#month").children("option:selected").val();var day=$("#day").children("option:selected").val();var year=$("#year").children("option:selected").val();birthdateVerification(month,day,year);}function birthdateVerification(month,day,year){var month=Number(month);month=(month-1);month=month.toString();var day=day;var year=year;if(month!=undefined&&day!=undefined&&year!=undefined){var date=new Date(year,month,day);var todayDate=new Date();var todayMonth=todayDate.getMonth();var todayMonthFormtd=monthFormated(Number(todayMonth));var todayDay=todayDate.getDate();var todayYear=todayDate.getFullYear();var todayDateText=todayYear+"/"+todayMonthFormtd+"/"+todayDay;var todayToDate=Date.parse(todayDateText);var monthFormtd=monthFormated(Number(month));var userDate=year.toString()+"/"+monthFormtd+"/"+day.toString();var DOB=Date.parse(userDate);_birthdateVerify=date.getFullYear()==year&&date.getMonth()==month&&date.getDate()==day;if(DOB>=todayToDate){_birthdateVerify=false;}}}function monthFormated(month){return month<10?"0"+(month+1):month+1;}function termsState(value){if(!value){$("#payment-terms").removeClass("disabled");}else{$("#payment-terms").addClass("disabled");$("span.cc-end-number").html("");}if(!$("#constructor").hasClass("existing")){$("terms").disabled=value;}}function termsToggle(){$("#first-name, #last-name, #cardNumber, #cvcnumber, .form-element").on("blur",function(e){if($(".section-checkout").hasClass("step2")){termsToggleActions();}});$("#month, #year").on("click change",function(e){if($(".section-checkout").hasClass("step2")){termsToggleActions();}});var self=this;$('input[type="radio"]').on("click change",function(e){if(this.id=="autopay-payment-2"){diffCardAutoBill=true;termsState(true);}else{if(this.id==("autopay-payment-1")){diffCardAutoBill=false;termsToggleActions();}}});}function termsToggleActions(){var checkSelected;var allFormFields=[];$("#payment-info input.form-element").each(function(n,element){if(diffCardAutoBill){if(n<8&&n>4){allFormFields.push(element.value.length);}}else{if(n<4){allFormFields.push(element.value.length);}}});function inputSet(){for(var i=0;i<allFormFields.length;i++){var isOk;if(allFormFields[i]>0){isOk=true;}else{isOk=false;return false;}}if(isOk){return true;}else{return false;}}function selectSet(){var monthVal=$("#month").children("option:selected").val();var yearVal=$("#year").children("option:selected").val();var monthValAutoBill=$("#monthAbp").children("option:selected").val();var yearValAutoBill=$("#yearAbp").children("option:selected").val();if(monthVal&&yearVal&&!diffCardAutoBill||monthValAutoBill&&yearValAutoBill&&diffCardAutoBill){return true;}else{return false;}}if(inputSet()&&selectSet()){var tempVal;if(diffCardAutoBill){tempVal=$("#abpPaymentDataVO").val();}else{tempVal=$("#PaymentDataVO").val();}var valLength=tempVal.length;var finalVal=tempVal.slice((valLength-4),valLength);$("span.cc-end-number").html(finalVal);termsState(false);}}function checkoutDrawers(){var activeDrawer;$("a.open-drawer").on("click",function(e){e.preventDefault();var drawerSelected=".drawer-"+$(this).data("drawerId");if($(drawerSelected).hasClass("active")){$(activeDrawer).removeClass("active").removeClass("open").addClass("closed");activeDrawer=null;return;}if(activeDrawer){if($(drawerSelected).hasClass("closed")){$(activeDrawer).removeClass("active").removeClass("open").addClass("closed");activeDrawer=drawerSelected;$(drawerSelected).removeClass("closed").addClass("open").addClass("active");}}else{activeDrawer=drawerSelected;$(drawerSelected).removeClass("closed").addClass("open").addClass("active");}});}function toggleSummary(){$("a.open-summary-drawer").on("click",function(e){e.preventDefault();if($(".summary-drawer").hasClass("closed")){$(".summary-drawer").removeClass("closed").addClass("open");$(".open-summary-drawer").parent(".title").addClass("active");}else{$(".summary-drawer").removeClass("open").addClass("closed");$(".open-summary-drawer").parent(".title").removeClass("active");}});}function toggleShippingAddress(){$("#different-shipping-address").hide();$("#address1").next(".radio").on("click",function(e){$("#different-shipping-address").hide();if($("#address").val()){poboxValidationMatch(null,$("#address").val());}});$("#address2").next(".radio").on("click",function(e){$("#different-shipping-address").show();});}function toggleBillingAddress(){$("#different-billing-address").hide();$("#billing-address1, #billing-address2").next(".radio").on("click",function(e){$("#different-billing-address").hide();});$("#billing-address3").next(".radio").on("click",function(e){$("#different-billing-address").show();});}function togglePaymentInformation(){$("#different-payment-info").hide();$("#autopay-payment-1, #autopay-payment-3").next(".radio").on("click",function(e){$("#different-payment-info").hide();$("#payment-terms").show();$(".autopay p").show();});$("#autopay-payment-3").next(".radio").on("click",function(e){$("#payment-terms").hide();$(".autopay p").hide();});$("#autopay-payment-2").next(".radio").on("click",function(e){$("#different-payment-info").show();$("#payment-terms").show();$(".autopay p").show();});}function locationWarningModal(){var defaultStateValue=$("#state").children("option:selected").val();$("#city, #zipcode").focus(function(){modalAlert(this);$(this).blur();});$("#state").on("click change",function(){var hasValue=$("#state").children("option:selected").val();if(hasValue){var newSelection=$("#state").children("option:selected").val();$(".state").val(defaultStateValue);Foundation.libs.forms.refresh_custom_select($(".state"),true);}modalAlert(this,hasValue);});}function disableButtonError(){if(window.location.search.indexOf("whoopsError=true")>-1){var buttons=$("#btn-checkout-step-3-top-custom, #btn-checkout-step-3-bottom-custom");buttons.removeAttr("href");buttons.addClass("disabled");buttons.addClass("has-tip").attr("data-tooltip","").attr("title","We are having a system issue, please call our<br /> Sales Department 1-800-975-3708.");buttons.on("click",function(e){e.stopImmediatePropagation();});}}function modalAlert(value,hasValue){var dialogHTML='<div class="modal"><div class="dialog-content"><h2>Are you sure you want to change your location?</h2><p>If yes, your cart will be emptied and you will have to start again.</p><a href="#" class="button small orange" data-confirm="no">No</a><a href="#" class="button small green" data-confirm="yes">Yes, empty my cart</a></div></div>';var overlayHTML='<div class="md-overlay"></div>';if(!$(".md-overlay").length>0){$("#outer-wrap").after(overlayHTML);}if(!$(".modal").length>0){$("#outer-wrap").before(dialogHTML);}var $this=value;$(".dialog-content a.button").on("click",function(e){e.preventDefault();var confirm=$(this).attr("data-confirm");if(confirm=="yes"){$("#clear-cart").submit();$(".modal, .md-overlay").remove();}else{$(".modal, .md-overlay").remove();}});}function checkPOBoxSyntax(value){var pattern1=/(^p\.?\s?o\.?\s?b\.?(ox|in)?(\s|[0-9])|post\soffice\s?b\.?(ox|in))/i;var pattern2=/(^p\.?\s?o\.?\s?b\.?(ox|in)?(\s[0-9])|^post\soffice\s?b\.?(ox|in)?(\s[0-9]))/i;if(value.match(pattern1)){if(value.match(pattern2)){$("#notification-po-box").foundation("reveal","open");return true;}return false;}else{if(value.length>6){return true;}}}if($("#constructor").hasClass("section-checkout")){$(".error-container").hide();disableButtonError();checkoutValidation();toggleSummary();toggleShippingAddress();toggleBillingAddress();togglePaymentInformation();locationWarningModal();poboxValidation();birthdateValidation();termsToggle();termsState(true);$("#address").change(function(){checkPOBoxSyntax($(this).val());});}});